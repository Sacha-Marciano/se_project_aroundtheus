!function(){"use strict";class e{constructor(e,t){this._formSelector=e.formSelector,this._inputSelector=e.inputSelector,this._submitButtonSelector=e.submitButtonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass,this._form=t,this._inputList=Array.from(this._form.querySelectorAll(this._inputSelector)),this._buttonSubmit=this._form.querySelector(this._submitButtonSelector)}_setEventsListeners(){this._form.addEventListener("submit",(e=>{e.preventDefault()})),this._inputList.forEach((e=>{e.addEventListener("input",(()=>{this._checkInputValidity(this._form,e,this._inputErrorClass,this._errorClass),this._toggleButtonState(this._inputList,this._buttonSubmit,this._inactiveButtonClass)}))}))}_toggleButtonState(e,t,s){this._hasInvalidInput(e)?this.disableButton():(t.classList.remove(s),t.disabled=!1)}_hasInvalidInput(e){return e.some((e=>!e.validity.valid))}_checkInputValidity(e,t,s,n){t.validity.valid?this._hideInputError(e,t,s,n):this._showInputError(e,t,t.validationMessage,s,n)}_showInputError(e,t,s,n,i){const r=e.querySelector(`.${t.id}-error`);t.classList.add(n),r.textContent=s,r.classList.add(i)}_hideInputError(e,t,s,n){const i=e.querySelector(`.${t.id}-error`);t.classList.remove(s),i.classList.remove(n),i.textContent=""}enableValidation(){this.disableButton(),this._setEventsListeners()}disableButton(){this._buttonSubmit.classList.add(this._inactiveButtonClass),this._buttonSubmit.disabled=!0}}class t{constructor(e,t,s){this._name=e.name,this._link=e.link,this._template=t,this._handleImageClick=s,this._newCard=document.querySelector(this._template).content.querySelector(".card").cloneNode(!0)}renderCard(){return this._cardImageElement=this._newCard.querySelector(".card__image"),this._cardNameElement=this._newCard.querySelector(".card__name"),this._cardLikeElement=this._newCard.querySelector(".card__like-button"),this._cardTrashElement=this._newCard.querySelector(".card__delete-button"),this._cardImageElement.alt=this._name,this._cardImageElement.src=this._link,this._cardNameElement.textContent=this._name,this._setEventListeners(),this._newCard}_setEventListeners(){this._cardImageElement.addEventListener("click",(()=>{this._handleImageClick(this)})),this._cardLikeElement.addEventListener("click",(e=>{e.stopPropagation(),this._toggleLike()})),this._cardTrashElement.addEventListener("click",(e=>{e.stopPropagation(),this._deleteCard()}))}_toggleLike(){this._cardLikeElement.classList.toggle("card__like-button_liked")}_deleteCard(){this._newCard.remove()}}class s{constructor(e){this._popup=document.querySelector(e),this._closeButton=this._popup.querySelector(".modal__button_type_close"),this._handleEscClose=this._handleEscClose.bind(this)}open(){this._popup.classList.add("modal_opened"),document.addEventListener("keyup",this._handleEscClose)}close(){this._popup.classList.remove("modal_opened"),document.removeEventListener("keyup",this._handleEscClose)}_handleEscClose(e){"Escape"===e.key&&this.close()}setEventListeners(){this._closeButton.addEventListener("click",(()=>{this.close()})),this._popup.addEventListener("mousedown",(e=>{e.target===this._popup&&this.close()}))}}class n extends s{constructor(e,t){super(e),this.form=this._popup.querySelector(".modal__container"),this._handleFormSubmit=t,this._inputs=this.form.querySelectorAll(".modal__input")}_getInputValues(){const e={};return this._inputs.forEach((t=>{e[t.name]=t.value})),e}setEventListeners(){this.form.addEventListener("submit",(e=>{e.preventDefault(),this._handleFormSubmit(this._getInputValues())})),super.setEventListeners()}}const i={formSelector:".modal__container",inputSelector:".modal__input",submitButtonSelector:".modal__button_type_submit",inactiveButtonClass:"modal__button_inactive",inputErrorClass:"modal__input_type_error",errorClass:"modal__input-error"},r=new class{constructor(e){let{nameSelector:t,descriptionSelector:s}=e;this._name=document.querySelector(t),this._description=document.querySelector(s)}getUserInfo(){return{name:this._name.textContent,description:this._description.textContent}}setUserInfo(e){this._name.textContent=e.name,this._description.textContent=e.description}}({nameSelector:".profile__name",descriptionSelector:".profile__description"}),o=document.querySelector(".profile__button_type_edit"),a=document.querySelector(".profile__button_type_add"),l=new class extends s{constructor(e){super(e),this._image=this._popup.querySelector(".modal__image"),this._modalTitle=this._popup.querySelector(".modal__image-title")}open(e){this._image.src=e._link,this._image.alt=e._name,this._modalTitle.textContent=e._name,super.open()}}("#image-modal-id"),c=new n("#edit-modal-id",(function(e){r.setUserInfo(e),c.close(),u.disableButton()})),d=new n("#add-modal-id",(function(e){_.addItem(h(e)),d.close(),d.form.reset(),m.disableButton()})),_=new class{constructor(e,t){let{items:s,renderer:n}=e;this._items=s,this._container=document.querySelector(t),this._renderer=n}renderItems(){this._items.forEach((e=>{const t=this._renderer(e);this.addItem(t)}))}addItem(e){this._container.prepend(e)}}({items:[{name:"Lago di Braies",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/lago.jpg"},{name:"Vanoise National Park",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/vanoise.jpg"},{name:"Latemar",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/latemar.jpg"},{name:"Bald Mountains",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/bald-mountains.jpg"},{name:"Lake Louise",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/lake-louise.jpg"},{name:"Yosemite Valley",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/yosemite.jpg"}],renderer:h},".cards__list"),u=new e(i,c.form),m=new e(i,d.form);function h(e){return new t(e,"#card__template",p).renderCard()}function p(e){l.open(e)}_.renderItems(),u.enableValidation(),m.enableValidation(),o.addEventListener("click",(()=>{var e;e=r.getUserInfo(),c.form.querySelector("#name-id").value=e.name,c.form.querySelector("#aboutMe-id").value=e.description,c.open()})),a.addEventListener("click",(()=>d.open())),l.setEventListeners(),c.setEventListeners(),d.setEventListeners()}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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bnRzL0Zvcm1WYWxpZGF0b3IuanMiLCJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9hcm91bmR0aGV1cy8uL3NyYy9jb21wb25lbnRzL0NhcmQuanMiLCJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9hcm91bmR0aGV1cy8uL3NyYy9jb21wb25lbnRzL1BvcHVwLmpzIiwid2VicGFjazovL3NlX3Byb2plY3RfYXJvdW5kdGhldXMvLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzIiwid2VicGFjazovL3NlX3Byb2plY3RfYXJvdW5kdGhldXMvLi9zcmMvdXRpbHMvY29uc3RhbnRzLmpzIiwid2VicGFjazovL3NlX3Byb2plY3RfYXJvdW5kdGhldXMvLi9zcmMvcGFnZXMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9hcm91bmR0aGV1cy8uL3NyYy9jb21wb25lbnRzL1VzZXJJbmZvLmpzIiwid2VicGFjazovL3NlX3Byb2plY3RfYXJvdW5kdGhldXMvLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qcyIsIndlYnBhY2s6Ly9zZV9wcm9qZWN0X2Fyb3VuZHRoZXVzLy4vc3JjL2NvbXBvbmVudHMvU2VjdGlvbi5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjbGFzcyBGb3JtVmFsaWRhdG9yIHtcclxuICBjb25zdHJ1Y3RvcihzZXR0aW5ncywgZm9ybSkge1xyXG4gICAgdGhpcy5fZm9ybVNlbGVjdG9yID0gc2V0dGluZ3MuZm9ybVNlbGVjdG9yO1xyXG4gICAgdGhpcy5faW5wdXRTZWxlY3RvciA9IHNldHRpbmdzLmlucHV0U2VsZWN0b3I7XHJcbiAgICB0aGlzLl9zdWJtaXRCdXR0b25TZWxlY3RvciA9IHNldHRpbmdzLnN1Ym1pdEJ1dHRvblNlbGVjdG9yO1xyXG4gICAgdGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyA9IHNldHRpbmdzLmluYWN0aXZlQnV0dG9uQ2xhc3M7XHJcbiAgICB0aGlzLl9pbnB1dEVycm9yQ2xhc3MgPSBzZXR0aW5ncy5pbnB1dEVycm9yQ2xhc3M7XHJcbiAgICB0aGlzLl9lcnJvckNsYXNzID0gc2V0dGluZ3MuZXJyb3JDbGFzcztcclxuICAgIHRoaXMuX2Zvcm0gPSBmb3JtO1xyXG4gICAgdGhpcy5faW5wdXRMaXN0ID0gQXJyYXkuZnJvbShcclxuICAgICAgdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuX2lucHV0U2VsZWN0b3IpXHJcbiAgICApO1xyXG4gICAgdGhpcy5fYnV0dG9uU3VibWl0ID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yKTtcclxuICB9XHJcblxyXG4gIF9zZXRFdmVudHNMaXN0ZW5lcnMoKSB7XHJcbiAgICB0aGlzLl9mb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGV2dCkgPT4ge1xyXG4gICAgICBldnQucHJldmVudERlZmF1bHQoKTtcclxuICAgIH0pO1xyXG5cclxuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dEVsZW1lbnQpID0+IHtcclxuICAgICAgaW5wdXRFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCAoKSA9PiB7XHJcbiAgICAgICAgdGhpcy5fY2hlY2tJbnB1dFZhbGlkaXR5KFxyXG4gICAgICAgICAgdGhpcy5fZm9ybSxcclxuICAgICAgICAgIGlucHV0RWxlbWVudCxcclxuICAgICAgICAgIHRoaXMuX2lucHV0RXJyb3JDbGFzcyxcclxuICAgICAgICAgIHRoaXMuX2Vycm9yQ2xhc3NcclxuICAgICAgICApO1xyXG4gICAgICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKFxyXG4gICAgICAgICAgdGhpcy5faW5wdXRMaXN0LFxyXG4gICAgICAgICAgdGhpcy5fYnV0dG9uU3VibWl0LFxyXG4gICAgICAgICAgdGhpcy5faW5hY3RpdmVCdXR0b25DbGFzc1xyXG4gICAgICAgICk7XHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBfdG9nZ2xlQnV0dG9uU3RhdGUoaW5wdXRMaXN0LCBidXR0b25TdWJtaXQsIGluYWN0aXZlQnV0dG9uQ2xhc3MpIHtcclxuICAgIGlmICh0aGlzLl9oYXNJbnZhbGlkSW5wdXQoaW5wdXRMaXN0KSkge1xyXG4gICAgICB0aGlzLmRpc2FibGVCdXR0b24oKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGJ1dHRvblN1Ym1pdC5jbGFzc0xpc3QucmVtb3ZlKGluYWN0aXZlQnV0dG9uQ2xhc3MpO1xyXG4gICAgICBidXR0b25TdWJtaXQuZGlzYWJsZWQgPSBmYWxzZTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIF9oYXNJbnZhbGlkSW5wdXQoaW5wdXRMaXN0KSB7XHJcbiAgICByZXR1cm4gaW5wdXRMaXN0LnNvbWUoKGlucHV0KSA9PiB7XHJcbiAgICAgIHJldHVybiAhaW5wdXQudmFsaWRpdHkudmFsaWQ7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIF9jaGVja0lucHV0VmFsaWRpdHkoZm9ybSwgaW5wdXRFbGVtZW50LCBpbnB1dEVycm9yQ2xhc3MsIGVycm9yQ2xhc3MpIHtcclxuICAgIGlmICghaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkKSB7XHJcbiAgICAgIHRoaXMuX3Nob3dJbnB1dEVycm9yKFxyXG4gICAgICAgIGZvcm0sXHJcbiAgICAgICAgaW5wdXRFbGVtZW50LFxyXG4gICAgICAgIGlucHV0RWxlbWVudC52YWxpZGF0aW9uTWVzc2FnZSxcclxuICAgICAgICBpbnB1dEVycm9yQ2xhc3MsXHJcbiAgICAgICAgZXJyb3JDbGFzc1xyXG4gICAgICApO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoZm9ybSwgaW5wdXRFbGVtZW50LCBpbnB1dEVycm9yQ2xhc3MsIGVycm9yQ2xhc3MpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgX3Nob3dJbnB1dEVycm9yKFxyXG4gICAgZm9ybSxcclxuICAgIGlucHV0RWxlbWVudCxcclxuICAgIGVycm9yTWVzc2FnZSxcclxuICAgIGlucHV0RXJyb3JDbGFzcyxcclxuICAgIGVycm9yQ2xhc3NcclxuICApIHtcclxuICAgIGNvbnN0IGVycm9yRWxlbWVudCA9IGZvcm0ucXVlcnlTZWxlY3RvcihgLiR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmApO1xyXG4gICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5hZGQoaW5wdXRFcnJvckNsYXNzKTtcclxuICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IGVycm9yTWVzc2FnZTtcclxuICAgIGVycm9yRWxlbWVudC5jbGFzc0xpc3QuYWRkKGVycm9yQ2xhc3MpO1xyXG4gIH1cclxuXHJcbiAgX2hpZGVJbnB1dEVycm9yKGZvcm0sIGlucHV0RWxlbWVudCwgaW5wdXRFcnJvckNsYXNzLCBlcnJvckNsYXNzKSB7XHJcbiAgICBjb25zdCBlcnJvckVsZW1lbnQgPSBmb3JtLnF1ZXJ5U2VsZWN0b3IoYC4ke2lucHV0RWxlbWVudC5pZH0tZXJyb3JgKTtcclxuICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKGlucHV0RXJyb3JDbGFzcyk7XHJcbiAgICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShlcnJvckNsYXNzKTtcclxuICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IFwiXCI7XHJcbiAgfVxyXG5cclxuICBlbmFibGVWYWxpZGF0aW9uKCkge1xyXG4gICAgdGhpcy5kaXNhYmxlQnV0dG9uKCk7XHJcbiAgICB0aGlzLl9zZXRFdmVudHNMaXN0ZW5lcnMoKTtcclxuICB9XHJcblxyXG4gIGRpc2FibGVCdXR0b24oKSB7XHJcbiAgICB0aGlzLl9idXR0b25TdWJtaXQuY2xhc3NMaXN0LmFkZCh0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcclxuICAgIHRoaXMuX2J1dHRvblN1Ym1pdC5kaXNhYmxlZCA9IHRydWU7XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgeyBGb3JtVmFsaWRhdG9yIH07XHJcbiIsImNsYXNzIENhcmQge1xyXG4gIGNvbnN0cnVjdG9yKGRhdGEsIGNhcmRTZWxlY3RvciwgaGFuZGxlSW1hZ2VDbGljaykge1xyXG4gICAgdGhpcy5fbmFtZSA9IGRhdGEubmFtZTtcclxuICAgIHRoaXMuX2xpbmsgPSBkYXRhLmxpbms7XHJcbiAgICB0aGlzLl90ZW1wbGF0ZSA9IGNhcmRTZWxlY3RvcjtcclxuICAgIHRoaXMuX2hhbmRsZUltYWdlQ2xpY2sgPSBoYW5kbGVJbWFnZUNsaWNrO1xyXG4gICAgdGhpcy5fbmV3Q2FyZCA9IGRvY3VtZW50XHJcbiAgICAgIC5xdWVyeVNlbGVjdG9yKHRoaXMuX3RlbXBsYXRlKVxyXG4gICAgICAuY29udGVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRcIilcclxuICAgICAgLmNsb25lTm9kZSh0cnVlKTtcclxuICB9XHJcblxyXG4gIHJlbmRlckNhcmQoKSB7XHJcbiAgICB0aGlzLl9jYXJkSW1hZ2VFbGVtZW50ID0gdGhpcy5fbmV3Q2FyZC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2ltYWdlXCIpO1xyXG4gICAgdGhpcy5fY2FyZE5hbWVFbGVtZW50ID0gdGhpcy5fbmV3Q2FyZC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX25hbWVcIik7XHJcbiAgICB0aGlzLl9jYXJkTGlrZUVsZW1lbnQgPSB0aGlzLl9uZXdDYXJkLnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fbGlrZS1idXR0b25cIik7XHJcbiAgICB0aGlzLl9jYXJkVHJhc2hFbGVtZW50ID0gdGhpcy5fbmV3Q2FyZC5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICBcIi5jYXJkX19kZWxldGUtYnV0dG9uXCJcclxuICAgICk7XHJcblxyXG4gICAgdGhpcy5fY2FyZEltYWdlRWxlbWVudC5hbHQgPSB0aGlzLl9uYW1lO1xyXG4gICAgdGhpcy5fY2FyZEltYWdlRWxlbWVudC5zcmMgPSB0aGlzLl9saW5rO1xyXG4gICAgdGhpcy5fY2FyZE5hbWVFbGVtZW50LnRleHRDb250ZW50ID0gdGhpcy5fbmFtZTtcclxuXHJcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxuICAgIHJldHVybiB0aGlzLl9uZXdDYXJkO1xyXG4gIH1cclxuXHJcbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgdGhpcy5fY2FyZEltYWdlRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICB0aGlzLl9oYW5kbGVJbWFnZUNsaWNrKHRoaXMpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgdGhpcy5fY2FyZExpa2VFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZXZ0KSA9PiB7XHJcbiAgICAgIGV2dC5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgdGhpcy5fdG9nZ2xlTGlrZSgpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgdGhpcy5fY2FyZFRyYXNoRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGV2dCkgPT4ge1xyXG4gICAgICBldnQuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgIHRoaXMuX2RlbGV0ZUNhcmQoKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgX3RvZ2dsZUxpa2UoKSB7XHJcbiAgICB0aGlzLl9jYXJkTGlrZUVsZW1lbnQuY2xhc3NMaXN0LnRvZ2dsZShcImNhcmRfX2xpa2UtYnV0dG9uX2xpa2VkXCIpO1xyXG4gIH1cclxuXHJcbiAgX2RlbGV0ZUNhcmQoKSB7XHJcbiAgICB0aGlzLl9uZXdDYXJkLnJlbW92ZSgpO1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IHsgQ2FyZCB9O1xyXG4iLCJjbGFzcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xyXG4gICAgdGhpcy5fcG9wdXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHBvcHVwU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5fY2xvc2VCdXR0b24gPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19idXR0b25fdHlwZV9jbG9zZVwiKTtcclxuICAgIHRoaXMuX2hhbmRsZUVzY0Nsb3NlID0gdGhpcy5faGFuZGxlRXNjQ2xvc2UuYmluZCh0aGlzKTtcclxuICB9XHJcblxyXG4gIG9wZW4oKSB7XHJcbiAgICB0aGlzLl9wb3B1cC5jbGFzc0xpc3QuYWRkKFwibW9kYWxfb3BlbmVkXCIpO1xyXG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImtleXVwXCIsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcclxuICB9XHJcblxyXG4gIGNsb3NlKCkge1xyXG4gICAgdGhpcy5fcG9wdXAuY2xhc3NMaXN0LnJlbW92ZShcIm1vZGFsX29wZW5lZFwiKTtcclxuICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJrZXl1cFwiLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XHJcbiAgfVxyXG5cclxuICBfaGFuZGxlRXNjQ2xvc2UoZXZ0KSB7XHJcbiAgICBpZiAoZXZ0LmtleSA9PT0gXCJFc2NhcGVcIikge1xyXG4gICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBzZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHRoaXMuX2Nsb3NlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgIH0pO1xyXG4gICAgdGhpcy5fcG9wdXAuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLCAoZXZ0KSA9PiB7XHJcbiAgICAgIGlmIChldnQudGFyZ2V0ID09PSB0aGlzLl9wb3B1cCkge1xyXG4gICAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgeyBQb3B1cCB9O1xyXG4iLCJpbXBvcnQgeyBQb3B1cCB9IGZyb20gXCIuL1BvcHVwLmpzXCI7XHJcblxyXG5jbGFzcyBQb3B1cFdpdGhGb3JtIGV4dGVuZHMgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IsIGhhbmRsZUZvcm1TdWJtaXQpIHtcclxuICAgIC8vIHBhc3MgaGFuZGxlQWRkZm9ybSBmb3IgYWRkIGZvcm0gYW5kIHBhc3MgaGFuZGxlZWRpdGZvcm0gZm9yIGVkaXQgZm9ybVxyXG4gICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XHJcbiAgICB0aGlzLmZvcm0gPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19jb250YWluZXJcIik7XHJcbiAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0ID0gaGFuZGxlRm9ybVN1Ym1pdDtcclxuICAgIHRoaXMuX2lucHV0cyA9IHRoaXMuZm9ybS5xdWVyeVNlbGVjdG9yQWxsKFwiLm1vZGFsX19pbnB1dFwiKTtcclxuICB9XHJcblxyXG4gIF9nZXRJbnB1dFZhbHVlcygpIHtcclxuICAgIGNvbnN0IGlucHV0VmFsdWVzID0ge307XHJcbiAgICB0aGlzLl9pbnB1dHMuZm9yRWFjaCgoaW5wdXQpID0+IHtcclxuICAgICAgaW5wdXRWYWx1ZXNbaW5wdXQubmFtZV0gPSBpbnB1dC52YWx1ZTtcclxuICAgIH0pO1xyXG4gICAgcmV0dXJuIGlucHV0VmFsdWVzO1xyXG4gIH1cclxuXHJcbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICB0aGlzLmZvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZXZ0KSA9PiB7XHJcbiAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0KHRoaXMuX2dldElucHV0VmFsdWVzKCkpO1xyXG4gICAgfSk7XHJcbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IHsgUG9wdXBXaXRoRm9ybSB9O1xyXG4iLCJjb25zdCB1c2VyU2V0dGluZ3MgPSB7XHJcbiAgbmFtZVNlbGVjdG9yOiBcIi5wcm9maWxlX19uYW1lXCIsXHJcbiAgZGVzY3JpcHRpb25TZWxlY3RvcjogXCIucHJvZmlsZV9fZGVzY3JpcHRpb25cIixcclxufTtcclxuXHJcbmNvbnN0IHZhbGlkYXRpb25TZXR0aW5ncyA9IHtcclxuICBmb3JtU2VsZWN0b3I6IFwiLm1vZGFsX19jb250YWluZXJcIixcclxuICBpbnB1dFNlbGVjdG9yOiBcIi5tb2RhbF9faW5wdXRcIixcclxuICBzdWJtaXRCdXR0b25TZWxlY3RvcjogXCIubW9kYWxfX2J1dHRvbl90eXBlX3N1Ym1pdFwiLFxyXG4gIGluYWN0aXZlQnV0dG9uQ2xhc3M6IFwibW9kYWxfX2J1dHRvbl9pbmFjdGl2ZVwiLFxyXG4gIGlucHV0RXJyb3JDbGFzczogXCJtb2RhbF9faW5wdXRfdHlwZV9lcnJvclwiLFxyXG4gIGVycm9yQ2xhc3M6IFwibW9kYWxfX2lucHV0LWVycm9yXCIsXHJcbn07XHJcblxyXG5jb25zdCBpbml0aWFsQ2FyZHMgPSBbXHJcbiAge1xyXG4gICAgbmFtZTogXCJMYWdvIGRpIEJyYWllc1wiLFxyXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L2xhZ28uanBnXCIsXHJcbiAgfSxcclxuXHJcbiAge1xyXG4gICAgbmFtZTogXCJWYW5vaXNlIE5hdGlvbmFsIFBhcmtcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC92YW5vaXNlLmpwZ1wiLFxyXG4gIH0sXHJcblxyXG4gIHtcclxuICAgIG5hbWU6IFwiTGF0ZW1hclwiLFxyXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L2xhdGVtYXIuanBnXCIsXHJcbiAgfSxcclxuXHJcbiAge1xyXG4gICAgbmFtZTogXCJCYWxkIE1vdW50YWluc1wiLFxyXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L2JhbGQtbW91bnRhaW5zLmpwZ1wiLFxyXG4gIH0sXHJcblxyXG4gIHtcclxuICAgIG5hbWU6IFwiTGFrZSBMb3Vpc2VcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC9sYWtlLWxvdWlzZS5qcGdcIixcclxuICB9LFxyXG5cclxuICB7XHJcbiAgICBuYW1lOiBcIllvc2VtaXRlIFZhbGxleVwiLFxyXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L3lvc2VtaXRlLmpwZ1wiLFxyXG4gIH0sXHJcbl07XHJcblxyXG5leHBvcnQgeyBpbml0aWFsQ2FyZHMsIHZhbGlkYXRpb25TZXR0aW5ncywgdXNlclNldHRpbmdzIH07XHJcbiIsIi8vSW1wb3J0IHN0eWxlc1xyXG5pbXBvcnQgXCIuL2luZGV4LmNzc1wiO1xyXG5cclxuLy9JbXBvcnQgY2xhc3Nlc1xyXG5pbXBvcnQgeyBGb3JtVmFsaWRhdG9yIH0gZnJvbSBcIi4uL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qc1wiO1xyXG5pbXBvcnQgeyBDYXJkIH0gZnJvbSBcIi4uL2NvbXBvbmVudHMvQ2FyZC5qc1wiO1xyXG5pbXBvcnQgeyBTZWN0aW9uIH0gZnJvbSBcIi4uL2NvbXBvbmVudHMvU2VjdGlvbi5qc1wiO1xyXG5pbXBvcnQgeyBVc2VySW5mbyB9IGZyb20gXCIuLi9jb21wb25lbnRzL1VzZXJJbmZvLmpzXCI7XHJcbmltcG9ydCB7IFBvcHVwV2l0aEltYWdlIH0gZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanNcIjtcclxuaW1wb3J0IHsgUG9wdXBXaXRoRm9ybSB9IGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanNcIjtcclxuXHJcbi8vSW1wb3J0IHNldHRpbmdzXHJcbmltcG9ydCB7XHJcbiAgaW5pdGlhbENhcmRzLFxyXG4gIHZhbGlkYXRpb25TZXR0aW5ncyxcclxuICB1c2VyU2V0dGluZ3MsXHJcbn0gZnJvbSBcIi4uL3V0aWxzL2NvbnN0YW50cy5qc1wiO1xyXG5cclxuLy9DcmVhdGUgVXNlckluZm8gY2xhc3NcclxuY29uc3QgdXNlckluZm8gPSBuZXcgVXNlckluZm8odXNlclNldHRpbmdzKTtcclxuXHJcbi8vU2VsZWN0aW5nIGJ1dHRvbnNcclxuY29uc3QgYnV0dG9uRWRpdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fYnV0dG9uX3R5cGVfZWRpdFwiKTtcclxuY29uc3QgYnV0dG9uQWRkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19idXR0b25fdHlwZV9hZGRcIik7XHJcblxyXG4vL0NyZWF0ZSBwb3B1cHMgY2xhc3NlcyBhbmQgc2V0IGV2ZW50IGxpc3RlbmVyc1xyXG5jb25zdCBwb3B1cEltYWdlID0gbmV3IFBvcHVwV2l0aEltYWdlKFwiI2ltYWdlLW1vZGFsLWlkXCIpO1xyXG5jb25zdCBwb3B1cEVkaXQgPSBuZXcgUG9wdXBXaXRoRm9ybShcIiNlZGl0LW1vZGFsLWlkXCIsIGhhbmRsZUVkaXRTdW1iaXQpO1xyXG5jb25zdCBwb3B1cEFkZCA9IG5ldyBQb3B1cFdpdGhGb3JtKFwiI2FkZC1tb2RhbC1pZFwiLCBoYW5kbGVBZGRTdW1iaXQpO1xyXG5cclxuLy9DcmVhdGUgY2FyZCBzZWN0aW9uIGNsYXNzXHJcbmNvbnN0IHNlY3Rpb25DYXJkID0gbmV3IFNlY3Rpb24oXHJcbiAgeyBpdGVtczogaW5pdGlhbENhcmRzLCByZW5kZXJlcjogY3JlYXRlQ2FyZCB9LFxyXG4gIFwiLmNhcmRzX19saXN0XCJcclxuKTtcclxuXHJcbi8vQ3JlYXRlIHZhbGlkYXRvcnNcclxuY29uc3QgZm9ybUVkaXRWYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcih2YWxpZGF0aW9uU2V0dGluZ3MsIHBvcHVwRWRpdC5mb3JtKTtcclxuY29uc3QgZm9ybUFkZFZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKHZhbGlkYXRpb25TZXR0aW5ncywgcG9wdXBBZGQuZm9ybSk7XHJcblxyXG4vL0hhbmRsZXJzIGZvciBjbGFzc2VzXHJcbmZ1bmN0aW9uIGNyZWF0ZUNhcmQoaXRlbSkge1xyXG4gIGNvbnN0IGNhcmRFbGVtZW50ID0gbmV3IENhcmQoaXRlbSwgXCIjY2FyZF9fdGVtcGxhdGVcIiwgaGFuZGxlSW1hZ2VDbGljayk7XHJcbiAgcmV0dXJuIGNhcmRFbGVtZW50LnJlbmRlckNhcmQoKTtcclxufVxyXG5cclxuZnVuY3Rpb24gaGFuZGxlSW1hZ2VDbGljayhkYXRhKSB7XHJcbiAgcG9wdXBJbWFnZS5vcGVuKGRhdGEpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBoYW5kbGVFZGl0U3VtYml0KG9iaikge1xyXG4gIHVzZXJJbmZvLnNldFVzZXJJbmZvKG9iaik7XHJcbiAgcG9wdXBFZGl0LmNsb3NlKCk7XHJcbiAgZm9ybUVkaXRWYWxpZGF0b3IuZGlzYWJsZUJ1dHRvbigpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBoYW5kbGVBZGRTdW1iaXQob2JqKSB7XHJcbiAgc2VjdGlvbkNhcmQuYWRkSXRlbShjcmVhdGVDYXJkKG9iaikpO1xyXG4gIHBvcHVwQWRkLmNsb3NlKCk7XHJcbiAgcG9wdXBBZGQuZm9ybS5yZXNldCgpO1xyXG4gIGZvcm1BZGRWYWxpZGF0b3IuZGlzYWJsZUJ1dHRvbigpO1xyXG59XHJcblxyXG4vL0ZpbGxzIGVkaXQgcG9wdXAgaW5wdXRzIGFjY29yZGluZyB0byBwcm9maWxlIGluZm9cclxuZnVuY3Rpb24gZmlsbFByb2ZpbGVJbnB1dHMob2JqKSB7XHJcbiAgcG9wdXBFZGl0LmZvcm0ucXVlcnlTZWxlY3RvcihcIiNuYW1lLWlkXCIpLnZhbHVlID0gb2JqLm5hbWU7XHJcbiAgcG9wdXBFZGl0LmZvcm0ucXVlcnlTZWxlY3RvcihcIiNhYm91dE1lLWlkXCIpLnZhbHVlID0gb2JqLmRlc2NyaXB0aW9uO1xyXG59XHJcblxyXG4vL09uIHBhZ2UgbG9hZC9yZWZyZXNoXHJcbnNlY3Rpb25DYXJkLnJlbmRlckl0ZW1zKCk7XHJcbmZvcm1FZGl0VmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcclxuZm9ybUFkZFZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XHJcblxyXG4vL1NldCBldmVudCBMaXN0ZW5lcnNcclxuYnV0dG9uRWRpdC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gIGZpbGxQcm9maWxlSW5wdXRzKHVzZXJJbmZvLmdldFVzZXJJbmZvKCkpO1xyXG4gIHBvcHVwRWRpdC5vcGVuKCk7XHJcbn0pO1xyXG5idXR0b25BZGQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHBvcHVwQWRkLm9wZW4oKSk7XHJcbnBvcHVwSW1hZ2Uuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxucG9wdXBFZGl0LnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbnBvcHVwQWRkLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiIsImNsYXNzIFVzZXJJbmZvIHtcclxuICBjb25zdHJ1Y3Rvcih7IG5hbWVTZWxlY3RvciwgZGVzY3JpcHRpb25TZWxlY3RvciB9KSB7XHJcbiAgICB0aGlzLl9uYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihuYW1lU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5fZGVzY3JpcHRpb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGRlc2NyaXB0aW9uU2VsZWN0b3IpO1xyXG4gIH1cclxuXHJcbiAgZ2V0VXNlckluZm8oKSB7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBuYW1lOiB0aGlzLl9uYW1lLnRleHRDb250ZW50LFxyXG4gICAgICBkZXNjcmlwdGlvbjogdGhpcy5fZGVzY3JpcHRpb24udGV4dENvbnRlbnQsXHJcbiAgICB9O1xyXG4gIH1cclxuXHJcbiAgc2V0VXNlckluZm8oZGF0YSkge1xyXG4gICAgdGhpcy5fbmFtZS50ZXh0Q29udGVudCA9IGRhdGEubmFtZTtcclxuICAgIHRoaXMuX2Rlc2NyaXB0aW9uLnRleHRDb250ZW50ID0gZGF0YS5kZXNjcmlwdGlvbjtcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCB7IFVzZXJJbmZvIH07XHJcbiIsImltcG9ydCB7IFBvcHVwIH0gZnJvbSBcIi4vUG9wdXAuanNcIjtcclxuXHJcbmNsYXNzIFBvcHVwV2l0aEltYWdlIGV4dGVuZHMgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcclxuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5faW1hZ2UgPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19pbWFnZVwiKTtcclxuICAgIHRoaXMuX21vZGFsVGl0bGUgPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19pbWFnZS10aXRsZVwiKTtcclxuICB9XHJcblxyXG4gIG9wZW4oZGF0YSkge1xyXG4gICAgLy9yZWZlcmVuY2UgaXMgYW4gb2JqZWN0IHdpdGggbmFtZSBhbmQgbGluayAobGlrZSBpbml0aWFsY2FyZHMpXHJcbiAgICB0aGlzLl9pbWFnZS5zcmMgPSBkYXRhLl9saW5rO1xyXG4gICAgdGhpcy5faW1hZ2UuYWx0ID0gZGF0YS5fbmFtZTtcclxuICAgIHRoaXMuX21vZGFsVGl0bGUudGV4dENvbnRlbnQgPSBkYXRhLl9uYW1lO1xyXG4gICAgc3VwZXIub3BlbigpO1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IHsgUG9wdXBXaXRoSW1hZ2UgfTtcclxuIiwiY2xhc3MgU2VjdGlvbiB7XHJcbiAgY29uc3RydWN0b3IoeyBpdGVtcywgcmVuZGVyZXIgfSwgY29udGFpbmVyU2VsZWN0b3IpIHtcclxuICAgIHRoaXMuX2l0ZW1zID0gaXRlbXM7XHJcbiAgICB0aGlzLl9jb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGNvbnRhaW5lclNlbGVjdG9yKTtcclxuICAgIHRoaXMuX3JlbmRlcmVyID0gcmVuZGVyZXI7XHJcbiAgfVxyXG4gIC8vcmVuZGVyZXIgd2lsbCBiZSBjcmVhdGVDYXJkIGZyb20gaW5kZXguanNcclxuICByZW5kZXJJdGVtcygpIHtcclxuICAgIHRoaXMuX2l0ZW1zLmZvckVhY2goKGl0ZW0pID0+IHtcclxuICAgICAgY29uc3QgZWxlbWVudCA9IHRoaXMuX3JlbmRlcmVyKGl0ZW0pO1xyXG4gICAgICB0aGlzLmFkZEl0ZW0oZWxlbWVudCk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGFkZEl0ZW0oZWxlbWVudCkge1xyXG4gICAgdGhpcy5fY29udGFpbmVyLnByZXBlbmQoZWxlbWVudCk7XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgeyBTZWN0aW9uIH07XHJcbiJdLCJuYW1lcyI6WyJGb3JtVmFsaWRhdG9yIiwiY29uc3RydWN0b3IiLCJzZXR0aW5ncyIsImZvcm0iLCJ0aGlzIiwiX2Zvcm1TZWxlY3RvciIsImZvcm1TZWxlY3RvciIsIl9pbnB1dFNlbGVjdG9yIiwiaW5wdXRTZWxlY3RvciIsIl9zdWJtaXRCdXR0b25TZWxlY3RvciIsInN1Ym1pdEJ1dHRvblNlbGVjdG9yIiwiX2luYWN0aXZlQnV0dG9uQ2xhc3MiLCJpbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiX2lucHV0RXJyb3JDbGFzcyIsImlucHV0RXJyb3JDbGFzcyIsIl9lcnJvckNsYXNzIiwiZXJyb3JDbGFzcyIsIl9mb3JtIiwiX2lucHV0TGlzdCIsIkFycmF5IiwiZnJvbSIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJfYnV0dG9uU3VibWl0IiwicXVlcnlTZWxlY3RvciIsIl9zZXRFdmVudHNMaXN0ZW5lcnMiLCJhZGRFdmVudExpc3RlbmVyIiwiZXZ0IiwicHJldmVudERlZmF1bHQiLCJmb3JFYWNoIiwiaW5wdXRFbGVtZW50IiwiX2NoZWNrSW5wdXRWYWxpZGl0eSIsIl90b2dnbGVCdXR0b25TdGF0ZSIsImlucHV0TGlzdCIsImJ1dHRvblN1Ym1pdCIsIl9oYXNJbnZhbGlkSW5wdXQiLCJkaXNhYmxlQnV0dG9uIiwiY2xhc3NMaXN0IiwicmVtb3ZlIiwiZGlzYWJsZWQiLCJzb21lIiwiaW5wdXQiLCJ2YWxpZGl0eSIsInZhbGlkIiwiX2hpZGVJbnB1dEVycm9yIiwiX3Nob3dJbnB1dEVycm9yIiwidmFsaWRhdGlvbk1lc3NhZ2UiLCJlcnJvck1lc3NhZ2UiLCJlcnJvckVsZW1lbnQiLCJpZCIsImFkZCIsInRleHRDb250ZW50IiwiZW5hYmxlVmFsaWRhdGlvbiIsIkNhcmQiLCJkYXRhIiwiY2FyZFNlbGVjdG9yIiwiaGFuZGxlSW1hZ2VDbGljayIsIl9uYW1lIiwibmFtZSIsIl9saW5rIiwibGluayIsIl90ZW1wbGF0ZSIsIl9oYW5kbGVJbWFnZUNsaWNrIiwiX25ld0NhcmQiLCJkb2N1bWVudCIsImNvbnRlbnQiLCJjbG9uZU5vZGUiLCJyZW5kZXJDYXJkIiwiX2NhcmRJbWFnZUVsZW1lbnQiLCJfY2FyZE5hbWVFbGVtZW50IiwiX2NhcmRMaWtlRWxlbWVudCIsIl9jYXJkVHJhc2hFbGVtZW50IiwiYWx0Iiwic3JjIiwiX3NldEV2ZW50TGlzdGVuZXJzIiwic3RvcFByb3BhZ2F0aW9uIiwiX3RvZ2dsZUxpa2UiLCJfZGVsZXRlQ2FyZCIsInRvZ2dsZSIsIlBvcHVwIiwicG9wdXBTZWxlY3RvciIsIl9wb3B1cCIsIl9jbG9zZUJ1dHRvbiIsIl9oYW5kbGVFc2NDbG9zZSIsImJpbmQiLCJvcGVuIiwiY2xvc2UiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwia2V5Iiwic2V0RXZlbnRMaXN0ZW5lcnMiLCJ0YXJnZXQiLCJQb3B1cFdpdGhGb3JtIiwiaGFuZGxlRm9ybVN1Ym1pdCIsInN1cGVyIiwiX2hhbmRsZUZvcm1TdWJtaXQiLCJfaW5wdXRzIiwiX2dldElucHV0VmFsdWVzIiwiaW5wdXRWYWx1ZXMiLCJ2YWx1ZSIsInZhbGlkYXRpb25TZXR0aW5ncyIsInVzZXJJbmZvIiwiX3JlZiIsIm5hbWVTZWxlY3RvciIsImRlc2NyaXB0aW9uU2VsZWN0b3IiLCJfZGVzY3JpcHRpb24iLCJnZXRVc2VySW5mbyIsImRlc2NyaXB0aW9uIiwic2V0VXNlckluZm8iLCJidXR0b25FZGl0IiwiYnV0dG9uQWRkIiwicG9wdXBJbWFnZSIsIl9pbWFnZSIsIl9tb2RhbFRpdGxlIiwicG9wdXBFZGl0Iiwib2JqIiwiZm9ybUVkaXRWYWxpZGF0b3IiLCJwb3B1cEFkZCIsInNlY3Rpb25DYXJkIiwiYWRkSXRlbSIsImNyZWF0ZUNhcmQiLCJyZXNldCIsImZvcm1BZGRWYWxpZGF0b3IiLCJjb250YWluZXJTZWxlY3RvciIsIml0ZW1zIiwicmVuZGVyZXIiLCJfaXRlbXMiLCJfY29udGFpbmVyIiwiX3JlbmRlcmVyIiwicmVuZGVySXRlbXMiLCJpdGVtIiwiZWxlbWVudCIsInByZXBlbmQiXSwic291cmNlUm9vdCI6IiJ9